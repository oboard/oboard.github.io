<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="js/Bmob-2.2.5.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            console.log('!!!');
            // 初始化
            Bmob.initialize("bfd303bd833e3eaf", "123321");
            const query = Bmob.Query("word");
            query.find().then(res => {
                console.log(JSON.stringify(res));
               // $('#content').text = res;


                var makeTree = function (parentObj, treeJson) {
                    var ulObj = $("<ul></ul>");
                    for (var i = 0; i < treeJson.length; i++) {
                        var childHtml = "<li>";
                        var aHtml = "<a href=" + treeJson[i].link + ">" + treeJson[i].name + "</a>"

                        childHtml += aHtml;
                        childHtml += "</li>";
                        var childObj = $(childHtml);
                        if (treeJson[i].children != null && treeJson[i].children.length > 0) {
                            makeTree(childObj, treeJson[i].children);
                        }
                        $(ulObj).append(childObj);
                    }
                    $(parentObj).append($(ulObj));
                };

                var parentObj = $("#content");
                makeTree($(parentObj), JSON.stringify(res));



            });
            $("#add").click(function () {
                console.log('!!!');
                const query = Bmob.Query('word');
                query.set("word", $("#txtWord").val());
                query.set("translation", $("#txtTranslation").val());
                query.save().then(res => {
                    alert("添加成功");
                    console.log(res)
                }).catch(err => {
                    console.log(err)
                })
            });
            $("#sel").click(function () {
                console.log('!!!');
                const query = Bmob.Query("word");
                query.find().then(res => {
                    console.log(res)
                });
            });
        });
    </script>
</head>

<body>
    <div style="background-color:#FFD700;width:30%;height:100%;float:left;padding:5%;border-radius: 20px;">
        <div>
            <h2>录入</h2>
            <p>单词
                <input type="text" id="txtWord" />
            </p>
            <p>翻译
                <input type="text" id="txtTranslation" />
            </p>
            <input type="button" value="添加" id="add" />
        </div>
        <div>
            <h2>查询</h2>
            <input type="text" id="txtSUserName" />
            <input type="button" value="查询" id="sel" />
        </div>
        <div>
            <h2>删除</h2>
            <input type="text" id="txtDUserName" />
            <input type="button" value="删除" id="del">
        </div>
    </div>

    <div id="content"
        style="background-color:#EEEEEE;height:100%;width:35%;float:right;padding:10%;border-radius: 20px;">
        内容
    </div>
</body>

</html>